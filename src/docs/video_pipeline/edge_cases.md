# Video Assembly 엣지 케이스 및 Known Issues

## 엣지 케이스

### 1. 모션 프레임이 부분적으로만 있는 경우
**증상:** 일부 장면만 모션 프레임이 있음

**원인:**
- 모션 생성 실패
- 수동 삭제

**대응:**
- 모션 프레임이 없거나 비어있으면 정적 이미지로 폴백
- 정적 이미지도 없으면 `ValueError` 발생

---

### 2. 오디오 길이와 비주얼 길이 불일치
**증상:** 오디오가 비주얼보다 길거나 짧음

**원인:**
- 모션 프레임 개수가 오디오 길이와 맞지 않음
- 이미지 크기 문제

**대응:**
- 오디오 길이에 맞춰 비주얼 길이 자동 조정
- 비주얼이 오디오보다 짧으면 마지막 프레임/이미지 반복
- 비주얼이 오디오보다 길면 자동 잘림

---

### 3. 모션 프레임 파일이 일부 누락된 경우
**증상:** motion_frames_path 리스트에 있는 파일 중 일부가 없음

**원인:**
- 파일 삭제
- 다운로드 실패

**대응:**
- 존재하는 프레임만 사용
- 모든 프레임이 없으면 정적 이미지로 폴백

**구현:**
- `compose_video()`에서 `valid_frames` 필터링
- `valid_frames`가 비어있으면 이미지로 폴백

---

### 4. 비디오 렌더링 중 메모리 부족
**증상:** 비디오 생성 중 메모리 오류 발생

**원인:**
- 매우 긴 비디오
- 고해상도 이미지/프레임
- 시스템 메모리 부족

**대응:**
- 재시도 로직 적용 (1회)
- 명확한 에러 메시지

**해결 전략:**
- 비디오를 여러 부분으로 나누어 렌더링 후 결합 (향후)
- 메모리 사용량 최적화

---

### 5. 오디오 파일이 손상된 경우
**증상:** 오디오 로드 실패

**원인:**
- 파일 손상
- 지원하지 않는 형식

**대응:**
- `FileNotFoundError` 또는 코덱 에러 발생
- 재시도로는 해결 불가 (파일 재생성 필요)

**해결 전략:**
- 오디오 파일 검증 로직 추가 (향후)
- 손상된 파일 자동 재생성 옵션

---

### 6. 캐시된 비디오 파일이 손상된 경우
**증상:** 캐시 히트가 되었지만 비디오 파일이 재생되지 않음

**원인:**
- 파일 손상
- 렌더링 중단

**대응:**
- 캐시 조회 시 파일 존재 확인
- 파일이 손상되었을 경우 감지 어려움 (현재)

**해결 전략:**
- 파일 검증 로직 추가 (향후)
- 해시 검증 (향후)

---

## Known Issues

### 1. 썸네일 자동 생성 미지원
**문제:** 최종 비디오 썸네일이 자동으로 생성되지 않음

**영향:** 수동으로 썸네일 생성 필요

**해결 방안:**
- 썸네일 생성 노드 추가 (향후)
- 첫 장면의 중간 프레임 사용

---

### 2. 자막 렌더링 미지원
**문제:** 대본이 비디오에 자막으로 표시되지 않음

**영향:** 오디오만으로 정보 전달

**해결 방안:**
- 자막 렌더링 노드 추가 (향후)
- moviepy의 TextClip 사용

---

### 3. 전환 효과 미지원
**문제:** 장면 간 전환이 단순 연결만 됨

**영향:** 비디오가 단조로울 수 있음

**해결 방안:**
- 전환 효과 추가 (향후)
- fade in/out, cross fade 등

---

### 4. 배경 음악 추가 미지원
**문제:** 배경 음악을 추가할 수 없음

**영향:** 오디오만 재생됨

**해결 방안:**
- 배경 음악 믹싱 기능 추가 (향후)
- 오디오 볼륨 조절

---

## 버그 이력

없음 (아직 이 서브그래프는 새로 생성된 구조)

